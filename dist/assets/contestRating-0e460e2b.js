import{a as x,b as E}from"./rating-21305edd.js";import{c as S}from"./changeColor-7a9dbd86.js";import{_ as C,e as u,E as p,r,j as R,o as d,c as g,b as l,d as m,a,w as o,k as T,f as _,F as f,l as V,t as c,n as h}from"./index-93209f80.js";const B={data:function(){return{contests:[],contest:[],total:0,value:u(""),tableEmptyText:"暂无数据",loading:0}},created(){this.getContest()},methods:{getContest(){x().then(e=>{this.contest=e.data}).catch(e=>{console.log(e),p.error("请求超时，请重试！")})},onSubmit(){this.tableEmptyText="正在查询中……",this.loading=u(!0),E(this.value).then(e=>{console.log(e),this.loading=0,this.contests=e.data.data,this.contests.forEach(s=>{s.url="https://codeforces.com/profile/"+s.handle}),this.tableEmptyText="该比赛未定级或无人参加"}).catch(e=>{this.loading=0,this.contests=null,console.log(e),p.error("请求超时，请重试！"),this.tableEmptyText="查询失败，请重试！"})},changeStyle(e){return e>0?"color: red;":"color: green"},rankStyle(e){return S(e)}}},D={style:{margin:"50px auto 0 auto",width:"900px"}},N={style:{margin:"20px auto"}},z={style:{padding:"50px 0"}},F=["href"];function U(e,s,j,L,M,i){const y=r("el-option"),b=r("el-select"),w=r("el-button"),n=r("el-table-column"),v=r("el-table"),k=R("loading");return d(),g(f,null,[l("div",D,[m(" 请选择场次： "),a(b,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value=t),class:"m-2",placeholder:"Select",size:"large",style:{width:"600px"}},{default:o(()=>[(d(!0),g(f,null,V(e.contest,t=>(d(),_(y,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",N,[a(w,{type:"primary",onClick:i.onSubmit},{default:o(()=>[m("查询")]),_:1},8,["onClick"])]),l("div",z,[T((d(),_(v,{data:e.contests,style:{width:"100%"},"empty-text":e.tableEmptyText},{default:o(()=>[a(n,{label:"参加的队员"},{default:o(()=>[a(n,{prop:"username",label:"姓名",width:"250"}),a(n,{prop:"handle",label:"cf昵称",width:"400"},{default:o(t=>[l("div",null,[l("a",{href:t.row.url},c(t.row.handle),9,F)])]),_:1}),a(n,{prop:"rank",label:"排名",width:"180"}),a(n,{prop:"oldRating",label:"定级前分数",width:"180"},{default:o(t=>[l("div",{style:h(i.rankStyle(t.row.oldRating))},c(t.row.oldRating),5)]),_:1}),a(n,{prop:"newRating",label:"定级后分数",width:"180"},{default:o(t=>[l("div",{style:h(i.rankStyle(t.row.newRating))},c(t.row.newRating),5)]),_:1}),a(n,{prop:"change",label:"+/-"},{default:o(t=>[l("div",{style:h(i.changeStyle(t.row.change))},c(t.row.change>0?"+"+t.row.change:t.row.change),5)]),_:1})]),_:1})]),_:1},8,["data","empty-text"])),[[k,e.loading]])])],64)}const H=C(B,[["render",U]]);export{H as default};
